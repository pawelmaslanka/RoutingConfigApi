{
    "router-id": "1.2.3.4",
    "route": {
        "policy": {
            "policy-1": {
                "term-1": {
                    "seq-no": 1,
                    "match": {
                        "as-path": ["_65002$", "^65002_"],
                        "community-list": ["65002:100", "65002:200"],
                        "prefix-list": ["192.168.0.0/16"],
                        "match-type": "ALL"
                    },
                    "action": {
                        "deny": false,
                        "set-community": ["65001:300"],
                        "set-med": 150,
                        "set": {
                            "community": ["65001:300"],
                            "med": 150
                        },

                        "prepend-as-path": {
                            "as-number": 65001,
                            "repeat_count": 2
                        }
                    }
                },
                "term-2": {
                    "seq-no": 2,
                    "match": {
                        "as-path-eq": ["65112"],
                        "community-in": ["65001:300"],
                        "match-type": "ANY"
                    },
                    "action": {
                        "deny": true,
                        "pass": true,
                        "decision": "pass",
                        "call-next": "term-1"
                    }
                }
            }
        }
    },
    "bgp": {
        "def-community-list": {
            "NO_EXPORT": [
                "65535:65281"
            ],
            "SITE_LOCAL": [
                "65534:65282",
                "65533:65281"
            ]
        },
        "def-ext-community-list": {
            "NO_EXPORT": [
                "65535:65281"
            ],
            "SITE_LOCAL": [
                "65534:65282",
                "65533:65281"
            ]
        },
        "def-function-bool": {
            "DEFAULT_ROUTE": {
                "if": {
                    "net-in": ["0.0.0.0/0", "::/0"],
                    "match-type": "ALL"
                },
                "then": {
                    "return": true
                },
                "else": {
                    "return": false
                }
            }
        },
        "route-policy": {
            "policy-1": {
                "match": {
                    "match-community-list": "SITE_LOCAL",
                    "match-type": "ANY"
                },
                "action": {
                    "add-ext-community-list": [
                        "NO_EXPORT",
                        "65524:65212",
                        "65523:65211"
                    ],
                    "action-type": "pass",
                    "let": {
                        "call-next": "policy-2"
                    }
                }
            },
            "policy-2": {
                "if": {
                    "community-eq": "SITE_LOCAL",
                    "match-type": "ALL"
                },
                "then": {
                    "ext-community-add": [
                        "NO_EXPORT",
                        "65524:65212",
                        "65523:65211"
                    ],
                    "action": "ACCEPT",
                    "allow": true,
                    "deny": false,
                    "action-type": "deny",
                    "decision": "deny",
                    "finally": "deny",
                    "do": "deny",
                    "let": "PASS"

                }
            },
            "policy-3": {
                "if": {
                    "function-bool-eq": [
                        {
                            "DEFAULT_ROUTE": true
                        },
                        {
                            "bool": [
                                {
                                    "func-name": "DEFAULT_ROUTE",
                                    "retval": true
                                }

                            ]
                        }
                    ],
                    "community-eq": "SITE_LOCAL",
                    "match-type": "ALL"
                },
                "then": {
                    "ext-community-add": [
                        "NO_EXPORT",
                        "65524:65212",
                        "65523:65211"
                    ],
                    "action": {
                        "call": "policy-4"
                    }
                }
            },
            "policy-4": {
                "if": {
                    "ext-community-in": "NO_EXPORT",
                    "match-type": "ALL"
                },
                "then": {
                    "ext-community-add": [
                        "NO_EXPORT",
                        "65524:65212",
                        "65523:65211"
                    ],
                    "action": {
                        "call": "NEXT"
                    }
                }
            },
            "policy-5": [
                {
                    "seq-no": 1,
                    "if": {
                        "func-bool-eq": {
                            "DEFAULT_ROUTE": true
                        },
                        "match-type": "ALL"
                    },
                    "then": {
                        "ext-community-set": [
                            "65524:65212",
                            "65523:65211"
                        ],
                        "action": {
                            "call": "NEXT"
                        }
                    }
                },
                {
                    "seq-no": 2,
                    "if": {
                        "function-bool-eq": {
                            "DEFAULT_ROUTE": false
                        },
                        "match-type": "ALL"
                    },
                    "then": {
                        "action": "ACCEPT"
                    }
                }
            ]
        }
    }
}